# å®¹å™¨æ±‡ç¼– Iï¼šæ¯”è¾ƒç®€å•çš„è‹¥å¹²å®¹å™¨

ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚

ä¸Šå‡ è®²æˆ‘ä»¬å­¦ä¹ äº† C++ çš„èµ„æºç®¡ç†å’Œå€¼ç±»åˆ«ã€‚ä»Šå¤©æˆ‘ä»¬æ¢ä¸€ä¸ªè¯é¢˜ï¼Œæ¥çœ‹ä¸€ä¸‹ C++ é‡Œçš„å®¹å™¨ã€‚

å…³äºå®¹å™¨ï¼Œå·²ç»å­˜åœ¨ä¸å°‘çš„å­¦ä¹ èµ„æ–™äº†ã€‚åœ¨ cppreference ä¸Šæœ‰å¾ˆå®Œå¤‡çš„å‚è€ƒèµ„æ–™ï¼ˆ**[1]**ï¼‰ã€‚ä»Šå¤©æˆ‘ä»¬é‡‡å–ä¸€ç§éæ­£è§„çš„è®²è§£æ–¹å¼ï¼Œå°½é‡ä¸é‡å¤å·²æœ‰çš„å‚è€ƒèµ„æ–™ï¼Œè€Œæ˜¯è®©ä½ åŠ æ·±å¯¹äºé‡è¦å®¹å™¨çš„ç†è§£ã€‚

å¯¹äºå®¹å™¨ï¼Œå­¦ä¹ ä¸Šçš„ä¸€ä¸ªéº»çƒ¦ç‚¹æ˜¯ä½ æ— æ³•ç›´æ¥è¾“å‡ºå®¹å™¨çš„å†…å®¹â€”â€”å¦‚æœä½ å®šä¹‰äº†ä¸€ä¸ª **vector&lt;int&gt; v**ï¼Œä½ æ˜¯æ²¡æ³•ç®€å•è¾“å‡º **v** çš„å†…å®¹çš„ã€‚æœ‰äººä¹Ÿè®¸ä¼šè¯´ç”¨ **copy(v.begin(), v.end(), ostream_iterator(â€¦))**ï¼Œå¯é‚£æ—¢å•°å—¦ï¼Œåˆå¯¹åƒ **map** æˆ– **vector&lt;vector&lt;â€¦&gt;&gt;** è¿™æ ·çš„å¤æ‚ç±»å‹æ— æ•ˆã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´å¥½ç”¨çš„å·¥å…·ã€‚åœ¨æ­¤ï¼Œæˆ‘å‘ä½ å¤§åŠ›æ¨è xeus-cling **[2]**ã€‚å®ƒçš„ä¾¿åˆ©æ€§æ— ä¸ä¼¦æ¯”â€”â€”ä½ å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨é‡Œä»¥äº¤äº’çš„æ–¹å¼è¿è¡Œä»£ç ï¼Œä¸éœ€è¦æœ¬æœºå®‰è£…ä»»ä½•ç¼–è¯‘å™¨ï¼ˆç‚¹å‡»â€œTrying it onlineâ€ä¸‹é¢çš„ binder é“¾æ¥ï¼‰ã€‚ä¸‹é¢æ˜¯åœ¨çº¿è¿è¡Œçš„ä¸€ä¸ªæˆªå›¾ï¼š

![](./images/04-01.png)

xeus-cling ä¹Ÿå¯ä»¥åœ¨æœ¬åœ°å®‰è£…ã€‚å¯¹äºä½¿ç”¨ Linux çš„åŒå­¦ï¼Œå®‰è£…åº”å½“æ˜¯ç›¸å½“ä¾¿æ·çš„ã€‚æœ‰å…´è¶£çš„è¯ï¼Œä½¿ç”¨å…¶ä»–å¹³å°çš„åŒå­¦ä¹Ÿå¯ä»¥å°è¯•ä¸€ä¸‹ã€‚

å¦‚æœä½ æ—¢æ²¡æœ‰æœ¬åœ°è¿è¡Œçš„æ¡ä»¶ï¼Œä¹Ÿä¸æ–¹ä¾¿è¿œç¨‹ä½¿ç”¨äº’è”ç½‘æ¥è¿è¡Œä»£ç ï¼Œæˆ‘ä¸ªäººè¿˜ä¸ºæœ¬ä¸“æ å†™äº†ä¸€ä¸ªå°å°çš„å·¥å…· **[3]**ã€‚åœ¨ä½ çš„ä»£ç ä¸­åŒ…å«è¿™ä¸ªå¤´æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ–¹ä¾¿åœ°å¾—åˆ°ç±»ä¼¼äºä¸Šé¢çš„è¾“å‡ºã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```cpp
#include <iostream>
#include <map>
#include <vector>
#include "output_container.h"

using namespace std;

int main()
{
  map<int, int> mp{
    {1, 1}, {2, 4}, {3, 9}};
  cout << mp << endl;
  vector<vector<int>> vv{
    {1, 1}, {2, 4}, {3, 9}};
  cout << vv << endl;
}
```

æˆ‘ä»¬ä¼šå¾—åˆ°ä¸‹é¢çš„è¾“å‡ºï¼š

è¿™ä¸ªä»£ç ä¸­ç”¨åˆ°äº†å¾ˆå¤šæˆ‘ä»¬ç›®å‰ä¸“æ è¿˜æ²¡æœ‰è®²çš„çŸ¥è¯†ï¼Œæ‰€ä»¥ä½ æš‚ä¸”ä¸ç”¨å…³å¿ƒå®ƒçš„å®ç°åŸç†ã€‚å¦‚æœä½ èƒ½çœ‹å¾—æ‡‚è¿™ä¸ªä»£ç ï¼Œé‚£å°±å¤ªæ£’äº†ã€‚å¦‚æœä½ çœ‹ä¸æ‡‚ï¼Œå””ï¼Œä¸æ€¥ï¼Œæ…¢æ…¢æ¥ï¼Œä½ ä¼šæ˜ç™½çš„ã€‚

å·¥å…·åœ¨æ‰‹ï¼Œå¤©ä¸‹æˆ‘æœ‰ã€‚ä¸‹é¢æˆ‘ä»¬æ­£å¼å¼€è®²å®¹å™¨ç¯‡ã€‚

## string 

**string** ä¸€èˆ¬å¹¶ä¸è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ª C++ çš„å®¹å™¨ã€‚ä½†é‰´äºå…¶å’Œå®¹å™¨æœ‰å¾ˆå¤šå…±åŒç‚¹ï¼Œæˆ‘ä»¬å…ˆæ‹¿ **string** ç±»æ¥å¼€è¯´ã€‚

**string** æ˜¯æ¨¡æ¿ **basic_string** å¯¹äº **char** ç±»å‹çš„ç‰¹åŒ–ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªåªå­˜æ”¾å­—ç¬¦ **char** ç±»å‹æ•°æ®çš„å®¹å™¨ã€‚â€œçœŸæ­£â€çš„å®¹å™¨ç±»ä¸ **string** çš„æœ€å¤§ä¸åŒç‚¹æ˜¯é‡Œé¢å¯ä»¥å­˜æ”¾ä»»æ„ç±»å‹çš„å¯¹è±¡ã€‚

è·Ÿå…¶ä»–å¤§éƒ¨åˆ†å®¹å™¨ä¸€æ ·ï¼Œ **string** å…·æœ‰ä¸‹åˆ—æˆå‘˜å‡½æ•°ï¼š

- **begin** å¯ä»¥å¾—åˆ°å¯¹è±¡èµ·å§‹ç‚¹

- **end** å¯ä»¥å¾—åˆ°å¯¹è±¡çš„ç»“æŸç‚¹

- **empty** å¯ä»¥å¾—åˆ°å®¹å™¨æ˜¯å¦ä¸ºç©º

- **size** å¯ä»¥å¾—åˆ°å®¹å™¨çš„å¤§å°

- **swap** å¯ä»¥å’Œå¦å¤–ä¸€ä¸ªå®¹å™¨äº¤æ¢å…¶å†…å®¹

ï¼ˆå¯¹äºä¸é‚£ä¹ˆç†Ÿæ‚‰å®¹å™¨çš„äººï¼Œéœ€è¦çŸ¥é“ C++ çš„ **begin** å’Œ **end** æ˜¯åŠå¼€åŠé—­åŒºé—´ï¼šåœ¨å®¹å™¨éç©ºæ—¶ï¼Œ**begin** æŒ‡å‘ä¸€ä¸ªç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè€Œ **end** æŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ åé¢çš„ä½ç½®ï¼›åœ¨å®¹å™¨ä¸ºç©ºæ—¶ï¼Œ**begin** ç­‰äº **end**ã€‚åœ¨ **string** çš„æƒ…å†µä¸‹ï¼Œç”±äºè€ƒè™‘åˆ°å’Œ C å­—ç¬¦ä¸²çš„å…¼å®¹ï¼Œ**end** æŒ‡å‘ä»£è¡¨å­—ç¬¦ä¸²ç»“å°¾çš„ **\0** å­—ç¬¦ã€‚ï¼‰

ä¸Šé¢å°±å‡ ä¹æ˜¯æ‰€æœ‰å®¹å™¨çš„å…±åŒç‚¹äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼š

- å®¹å™¨éƒ½æœ‰å¼€å§‹å’Œç»“æŸç‚¹

- å®¹å™¨ä¼šè®°å½•å…¶çŠ¶æ€æ˜¯å¦éç©º

- å®¹å™¨æœ‰å¤§å°

- å®¹å™¨æ”¯æŒäº¤æ¢

å½“ç„¶ï¼Œè¿™åªæ˜¯å®¹å™¨çš„â€œå…±åŒç‚¹â€è€Œå·²ã€‚æ¯ä¸ªå®¹å™¨éƒ½æœ‰å…¶ç‰¹æ®Šçš„ç”¨é€”ã€‚

**string** çš„å†…å­˜å¸ƒå±€å¤§è‡´å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](./images/04-02.png)

ä¸‹é¢ä½ ä¼šçœ‹åˆ°ï¼Œä¸ç®¡æ˜¯å†…å­˜å¸ƒå±€ï¼Œè¿˜æ˜¯æˆå‘˜å‡½æ•°ï¼Œ**string** å’Œ **vector** æ˜¯éå¸¸ç›¸ä¼¼çš„ã€‚

**string** å½“ç„¶æ˜¯ä¸ºäº†å­˜æ”¾å­—ç¬¦ä¸²ã€‚å’Œç®€å•çš„ C å­—ç¬¦ä¸²ä¸åŒï¼š

- **string** è´Ÿè´£è‡ªåŠ¨ç»´æŠ¤å­—ç¬¦ä¸²çš„ç”Ÿå‘½å‘¨æœŸ

- **string** æ”¯æŒå­—ç¬¦ä¸²çš„æ‹¼æ¥æ“ä½œï¼ˆå¦‚ä¹‹å‰è¯´è¿‡çš„ **+** å’Œ **+=**ï¼‰

- **string** æ”¯æŒå­—ç¬¦ä¸²çš„æŸ¥æ‰¾æ“ä½œï¼ˆå¦‚ **find** å’Œ **rfind**ï¼‰

- **string** æ”¯æŒä» **istream** å®‰å…¨åœ°è¯»å…¥å­—ç¬¦ä¸²ï¼ˆä½¿ç”¨ **getline**ï¼‰

- **string** æ”¯æŒç»™æœŸå¾… **const char*** çš„æ¥å£ä¼ é€’å­—ç¬¦ä¸²å†…å®¹ï¼ˆä½¿ç”¨ **c_str**ï¼‰

- **string** æ”¯æŒåˆ°æ•°å­—çš„äº’è½¬ï¼ˆ**stoi** ç³»åˆ—å‡½æ•°å’Œ **to_string**ï¼‰

- ç­‰ç­‰

æ¨èä½ åœ¨ä»£ç ä¸­å°½é‡ä½¿ç”¨ **string** æ¥ç®¡ç†å­—ç¬¦ä¸²ã€‚ä¸è¿‡ï¼Œå¯¹äºå¯¹å¤–æš´éœ²çš„æ¥å£ï¼Œæƒ…å†µæœ‰ä¸€ç‚¹å¤æ‚ã€‚æˆ‘ä¸€èˆ¬ä¸å»ºè®®åœ¨æ¥å£ä¸­ä½¿ç”¨ **const string&amp;**ï¼Œé™¤éç¡®çŸ¥è°ƒç”¨è€…å·²ç»æŒæœ‰ **string**ï¼šå¦‚æœå‡½æ•°é‡Œä¸å¯¹å­—ç¬¦ä¸²åšå¤æ‚å¤„ç†çš„è¯ï¼Œä½¿ç”¨ **const char*** å¯ä»¥é¿å…åœ¨è°ƒç”¨è€…åªæœ‰ C å­—ç¬¦ä¸²æ—¶ç¼–è¯‘å™¨è‡ªåŠ¨æ„é€  **string**ï¼Œè¿™ç§é¢å¤–çš„æ„é€ å’Œææ„ä»£ä»·å¹¶ä¸ä½ã€‚åè¿‡æ¥ï¼Œå¦‚æœå®ç°è¾ƒä¸ºå¤æ‚ã€å¸Œæœ›ä½¿ç”¨ **string** çš„æˆå‘˜å‡½æ•°çš„è¯ï¼Œé‚£å°±åº”è¯¥è€ƒè™‘ä¸‹é¢çš„ç­–ç•¥ï¼š

- å¦‚æœä¸ä¿®æ”¹å­—ç¬¦ä¸²çš„å†…å®¹ï¼Œä½¿ç”¨ **const string&** æˆ– C++17 çš„ **string_view** ä½œä¸ºå‚æ•°ç±»å‹ã€‚åè€…æ˜¯æœ€ç†æƒ³çš„æƒ…å†µï¼Œå› ä¸ºå³ä½¿åœ¨åªæœ‰ C å­—ç¬¦ä¸²çš„æƒ…å†µï¼Œä¹Ÿä¸ä¼šå¼•å‘ä¸å¿…è¦çš„å†…å­˜å¤åˆ¶ã€‚

- å¦‚æœéœ€è¦åœ¨å‡½æ•°å†…ä¿®æ”¹å­—ç¬¦ä¸²å†…å®¹ã€ä½†ä¸å½±å“è°ƒç”¨è€…çš„è¯¥å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ **string** ä½œä¸ºå‚æ•°ç±»å‹ï¼ˆè‡ªåŠ¨æ‹·è´ï¼‰ã€‚

- å¦‚æœéœ€è¦æ”¹å˜è°ƒç”¨è€…çš„å­—ç¬¦ä¸²å†…å®¹ï¼Œä½¿ç”¨ **string&** ä½œä¸ºå‚æ•°ç±»å‹ï¼ˆé€šå¸¸ä¸æ¨èï¼‰ã€‚

ä¼°è®¡å¤§éƒ¨åˆ†åŒå­¦å¯¹ **string** å·²ç»å¾ˆç†Ÿæ‚‰äº†ã€‚æˆ‘ä»¬åœ¨æ­¤åªç»™å‡ºä¸€ä¸ªéå¸¸ç®€å•çš„å°ä¾‹å­ï¼š

```cpp
string name;
cout << "What's your name? ";
getline(cin, name);
cout << "Nice to meet you, " << name
     << "!\n";
```

## vector 

**vector** åº”è¯¥æ˜¯æœ€å¸¸ç”¨çš„å®¹å™¨äº†ã€‚å®ƒçš„åå­—â€œå‘é‡â€æ¥æºäºæ•°å­¦æœ¯è¯­ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬æŠŠå®ƒå½“æˆåŠ¨æ€æ•°ç»„æ›´ä¸ºåˆé€‚ã€‚å®ƒåŸºæœ¬ç›¸å½“äº Java çš„ **ArrayList** å’Œ Python çš„ **list**ã€‚

å’Œ **string** ç›¸ä¼¼ï¼Œ**vector** çš„æˆå‘˜åœ¨å†…å­˜é‡Œè¿ç»­å­˜æ”¾ï¼ŒåŒæ—¶ **begin**ã€**end**ã€**front**ã€**back** æˆå‘˜å‡½æ•°æŒ‡å‘çš„ä½ç½®ä¹Ÿå’Œ **string** ä¸€æ ·ï¼Œå¤§è‡´å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](./images/04-03.png)

é™¤äº†å®¹å™¨ç±»çš„å…±åŒç‚¹ï¼Œ**vector** å…è®¸ä¸‹é¢çš„æ“ä½œï¼ˆä¸å®Œå…¨åˆ—è¡¨ï¼‰ï¼š

- å¯ä»¥ä½¿ç”¨ä¸­æ‹¬å·çš„ä¸‹æ ‡æ¥è®¿é—®å…¶æˆå‘˜ï¼ˆåŒ **string**ï¼‰

- å¯ä»¥ä½¿ç”¨ **data** æ¥è·å¾—æŒ‡å‘å…¶å†…å®¹çš„è£¸æŒ‡é’ˆï¼ˆåŒ **string**ï¼‰

- å¯ä»¥ä½¿ç”¨ **capacity** æ¥è·å¾—å½“å‰åˆ†é…çš„å­˜å‚¨ç©ºé—´çš„å¤§å°ï¼Œä»¥å…ƒç´ æ•°é‡è®¡ï¼ˆåŒ **string**ï¼‰

- å¯ä»¥ä½¿ç”¨ **reserve** æ¥æ”¹å˜æ‰€éœ€çš„å­˜å‚¨ç©ºé—´çš„å¤§å°ï¼ŒæˆåŠŸå **capacity()** ä¼šæ”¹å˜ï¼ˆåŒ **string**ï¼‰

- å¯ä»¥ä½¿ç”¨ **resize** æ¥æ”¹å˜å…¶å¤§å°ï¼ŒæˆåŠŸå **size()** ä¼šæ”¹å˜ï¼ˆåŒ **string**ï¼‰

- å¯ä»¥ä½¿ç”¨ **pop_back** æ¥åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆåŒ **string**ï¼‰

- å¯ä»¥ä½¿ç”¨ **push_back** åœ¨å°¾éƒ¨æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼ˆåŒ **string**ï¼‰

- å¯ä»¥ä½¿ç”¨ **insert** åœ¨æŒ‡å®šä½ç½®å‰æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼ˆåŒ **string**ï¼‰

- å¯ä»¥ä½¿ç”¨ **erase** åœ¨æŒ‡å®šä½ç½®åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼ˆåŒ **string**ï¼‰

- å¯ä»¥ä½¿ç”¨ **emplace** åœ¨æŒ‡å®šä½ç½®æ„é€ ä¸€ä¸ªå…ƒç´ 

- å¯ä»¥ä½¿ç”¨ **emplace_back** åœ¨å°¾éƒ¨æ–°æ„é€ ä¸€ä¸ªå…ƒç´ 

å¤§å®¶å¯ä»¥ç•™æ„ä¸€ä¸‹ **push_â€¦** å’Œ **pop_â€¦** æˆå‘˜å‡½æ•°ã€‚å®ƒä»¬å­˜åœ¨æ—¶ï¼Œè¯´æ˜å®¹å™¨å¯¹æŒ‡å®šä½ç½®çš„åˆ é™¤å’Œæ’å…¥æ€§èƒ½è¾ƒé«˜ã€‚**vector** é€‚åˆåœ¨å°¾éƒ¨æ“ä½œï¼Œè¿™æ˜¯å®ƒçš„å†…å­˜å¸ƒå±€å†³å®šçš„ã€‚åªæœ‰åœ¨å°¾éƒ¨æ’å…¥å’Œåˆ é™¤æ—¶ï¼Œå…¶ä»–å…ƒç´ æ‰ä¼šä¸éœ€è¦ç§»åŠ¨ï¼Œé™¤éå†…å­˜ç©ºé—´ä¸è¶³å¯¼è‡´éœ€è¦é‡æ–°åˆ†é…å†…å­˜ç©ºé—´ã€‚

å½“ **push_back**ã€**insert**ã€**reserve**ã€**resize** ç­‰å‡½æ•°å¯¼è‡´å†…å­˜é‡åˆ†é…æ—¶ï¼Œæˆ–å½“ **insert**ã€**erase** å¯¼è‡´å…ƒç´ ä½ç½®ç§»åŠ¨æ—¶ï¼Œ**vector** ä¼šè¯•å›¾æŠŠå…ƒç´ â€œç§»åŠ¨â€åˆ°æ–°çš„å†…å­˜åŒºåŸŸã€‚**vector** é€šå¸¸ä¿è¯å¼ºå¼‚å¸¸å®‰å…¨æ€§ï¼Œå¦‚æœå…ƒç´ ç±»å‹æ²¡æœ‰æä¾›ä¸€ä¸ª**ä¿è¯ä¸æŠ›å¼‚å¸¸çš„ç§»åŠ¨æ„é€ å‡½æ•°**ï¼Œ**vector** é€šå¸¸ä¼šä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°ã€‚å› æ­¤ï¼Œå¯¹äºæ‹·è´ä»£ä»·è¾ƒé«˜çš„è‡ªå®šä¹‰å…ƒç´ ç±»å‹ï¼Œæˆ‘ä»¬åº”å½“å®šä¹‰ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå¹¶æ ‡å…¶ä¸º **noexcept**ï¼Œæˆ–åªåœ¨å®¹å™¨ä¸­æ”¾ç½®å¯¹è±¡çš„æ™ºèƒ½æŒ‡é’ˆã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¹‹å‰éœ€è¦åœ¨ **smart_ptr** çš„å®ç°ä¸­æ ‡ä¸Š **noexcept** çš„åŸå› ã€‚

ä¸‹é¢çš„ä»£ç å¯ä»¥æ¼”ç¤ºè¿™ä¸€è¡Œä¸ºï¼š

```cpp
#include <iostream>
#include <vector>

using namespace std;

class Obj1 {
public:
  Obj1()
  {
    cout << "Obj1()\n";
  }
  Obj1(const Obj1&)
  {
    cout << "Obj1(const Obj1&)\n";
  }
  Obj1(Obj1&&)
  {
    cout << "Obj1(Obj1&&)\n";
  }
};

class Obj2 {
public:
  Obj2()
  {
    cout << "Obj2()\n";
  }
  Obj2(const Obj2&)
  {
    cout << "Obj2(const Obj2&)\n";
  }
  Obj2(Obj2&&) noexcept
  {
    cout << "Obj2(Obj2&&)\n";
  }
};

int main()
{
  vector<Obj1> v1;
  v1.reserve(2);
  v1.emplace_back();
  v1.emplace_back();
  v1.emplace_back();

  vector<Obj2> v2;
  v2.reserve(2);
  v2.emplace_back();
  v2.emplace_back();
  v2.emplace_back();
}
```

æˆ‘ä»¬å¯ä»¥ç«‹å³å¾—åˆ°ä¸‹é¢çš„è¾“å‡ºï¼š

**Obj1** å’Œ **Obj2** çš„å®šä¹‰åªå·®äº†ä¸€ä¸ª **noexcept**ï¼Œä½†è¿™ä¸ªå°å°çš„å·®å¼‚å°±å¯¼è‡´äº† **vector** æ˜¯å¦ä¼šç§»åŠ¨å¯¹è±¡ã€‚è¿™ç‚¹éå¸¸é‡è¦ã€‚

C++11 å¼€å§‹æä¾›çš„ **emplaceâ€¦** ç³»åˆ—å‡½æ•°æ˜¯ä¸ºäº†æå‡å®¹å™¨çš„æ€§èƒ½è€Œè®¾è®¡çš„ã€‚ä½ å¯ä»¥è¯•è¯•æŠŠ **v1.emplace_back()** æ”¹æˆ **v1.push_back(Obj1())**ã€‚å¯¹äº **vector** é‡Œçš„å†…å®¹ï¼Œç»“æœæ˜¯ä¸€æ ·çš„ï¼›ä½†ä½¿ç”¨ **push_back** ä¼šé¢å¤–ç”Ÿæˆä¸´æ—¶å¯¹è±¡ï¼Œå¤šä¸€æ¬¡æ‹·è´æ„é€ å’Œä¸€æ¬¡ææ„ã€‚

ç°ä»£å¤„ç†å™¨çš„ä½“ç³»æ¶æ„ä½¿å¾—å¯¹è¿ç»­å†…å­˜è®¿é—®çš„é€Ÿåº¦æ¯”ä¸è¿ç»­çš„å†…å­˜è¦å¿«å¾—å¤šã€‚å› è€Œï¼Œ**vector** çš„è¿ç»­å†…å­˜ä½¿ç”¨æ˜¯å®ƒçš„ä¸€å¤§ä¼˜åŠ¿æ‰€åœ¨ã€‚å½“ä½ ä¸çŸ¥é“è¯¥ç”¨ä»€ä¹ˆå®¹å™¨æ—¶ï¼Œç¼ºçœå°±ä½¿ç”¨ **vector** å§ã€‚

**vector** çš„ä¸€ä¸ªä¸»è¦ç¼ºé™·æ˜¯å¤§å°å¢é•¿æ—¶å¯¼è‡´çš„å…ƒç´ ç§»åŠ¨ã€‚å¦‚æœå¯èƒ½ï¼Œå°½æ—©ä½¿ç”¨ **reserve** å‡½æ•°ä¸º **vector** ä¿ç•™æ‰€éœ€çš„å†…å­˜ï¼Œè¿™åœ¨ **vector** é¢„æœŸä¼šå¢é•¿å¾ˆå¤§æ—¶èƒ½å¸¦æ¥å¾ˆå¤§çš„æ€§èƒ½æå‡ã€‚

## deque 

**deque** çš„æ„æ€æ˜¯ double-ended queueï¼ŒåŒç«¯é˜Ÿåˆ—ã€‚å®ƒä¸»è¦æ˜¯ç”¨æ¥æ»¡è¶³ä¸‹é¢è¿™ä¸ªéœ€æ±‚ï¼š

- å®¹å™¨ä¸ä»…å¯ä»¥ä»å°¾éƒ¨è‡ªç”±åœ°æ·»åŠ å’Œåˆ é™¤å…ƒç´ ï¼Œä¹Ÿå¯ä»¥ä»å¤´éƒ¨è‡ªç”±åœ°æ·»åŠ å’Œåˆ é™¤ã€‚

**deque** çš„æ¥å£å’Œ **vector** ç›¸æ¯”ï¼Œæœ‰å¦‚ä¸‹çš„åŒºåˆ«ï¼š

- **deque** æä¾› **push_front**ã€**emplace_front** å’Œ **pop_front** æˆå‘˜å‡½æ•°ã€‚

- **deque** ä¸æä¾› **data**ã€**capacity** å’Œ **reserve** æˆå‘˜å‡½æ•°ã€‚

**deque** çš„å†…å­˜å¸ƒå±€ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š

![](./images/04-04.png)

å¯ä»¥çœ‹åˆ°ï¼š

- å¦‚æœåªä»å¤´ã€å°¾ä¸¤ä¸ªä½ç½®å¯¹ **deque** è¿›è¡Œå¢åˆ æ“ä½œçš„è¯ï¼Œå®¹å™¨é‡Œçš„å¯¹è±¡æ°¸è¿œä¸éœ€è¦ç§»åŠ¨ã€‚

- å®¹å™¨é‡Œçš„å…ƒç´ åªæ˜¯éƒ¨åˆ†è¿ç»­çš„ï¼ˆå› è€Œæ²¡æ³•æä¾› **data** æˆå‘˜å‡½æ•°ï¼‰ã€‚

- ç”±äºå…ƒç´ çš„å­˜å‚¨å¤§éƒ¨åˆ†ä»ç„¶è¿ç»­ï¼Œå®ƒçš„éå†æ€§èƒ½æ˜¯æ¯”è¾ƒé«˜çš„ã€‚

- ç”±äºæ¯ä¸€æ®µå­˜å‚¨å¤§å°ç›¸ç­‰ï¼Œ**deque** æ”¯æŒä½¿ç”¨ä¸‹æ ‡è®¿é—®å®¹å™¨å…ƒç´ ï¼Œå¤§è‡´ç›¸å½“äº **index[i / chunk_size][i % chunk_size]**ï¼Œä¹Ÿä¿æŒé«˜æ•ˆã€‚

å¦‚æœä½ éœ€è¦ä¸€ä¸ªç»å¸¸åœ¨å¤´å°¾å¢åˆ å…ƒç´ çš„å®¹å™¨ï¼Œé‚£ **deque** ä¼šæ˜¯ä¸ªåˆé€‚çš„é€‰æ‹©ã€‚

## list 

**list** åœ¨ C++ é‡Œä»£è¡¨åŒå‘é“¾è¡¨ã€‚å’Œ **vector** ç›¸æ¯”ï¼Œå®ƒä¼˜åŒ–äº†åœ¨å®¹å™¨ä¸­é—´çš„æ’å…¥å’Œåˆ é™¤ï¼š

- **list** æä¾›é«˜æ•ˆçš„ã€O(1) å¤æ‚åº¦çš„ä»»æ„ä½ç½®çš„æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚

- **list** ä¸æä¾›ä½¿ç”¨ä¸‹æ ‡è®¿é—®å…¶å…ƒç´ ã€‚

- **list** æä¾› **push_front**ã€**emplace_front** å’Œ **pop_front** æˆå‘˜å‡½æ•°ï¼ˆå’Œ **deque** ç›¸åŒï¼‰ã€‚

- **list** ä¸æä¾› **data**ã€**capacity** å’Œ **reserve** æˆå‘˜å‡½æ•°ï¼ˆå’Œ **deque** ç›¸åŒï¼‰ã€‚

å®ƒçš„å†…å­˜å¸ƒå±€ä¸€èˆ¬æ˜¯ä¸‹å›¾è¿™ä¸ªæ ·å­ï¼š

![](./images/04-05.png)

éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œè™½ç„¶ **list** æä¾›äº†ä»»æ„ä½ç½®æ’å…¥æ–°å…ƒç´ çš„çµæ´»æ€§ï¼Œä½†ç”±äºæ¯ä¸ªå…ƒç´ çš„å†…å­˜ç©ºé—´éƒ½æ˜¯å•ç‹¬åˆ†é…ã€ä¸è¿ç»­ï¼Œå®ƒçš„éå†æ€§èƒ½æ¯” **vector** å’Œ **deque** éƒ½è¦ä½ã€‚è¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸ŠæŠµæ¶ˆäº†å®ƒåœ¨æ’å…¥å’Œåˆ é™¤æ“ä½œæ—¶ä¸éœ€è¦ç§»åŠ¨å…ƒç´ çš„ç†è®ºæ€§èƒ½ä¼˜åŠ¿ã€‚å¦‚æœä½ ä¸å¤ªéœ€è¦éå†å®¹å™¨ã€åˆéœ€è¦åœ¨ä¸­é—´é¢‘ç¹æ’å…¥æˆ–åˆ é™¤å…ƒç´ ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ **list**ã€‚

å¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œå› ä¸ºæŸäº›æ ‡å‡†ç®—æ³•åœ¨ **list** ä¸Šä¼šå¯¼è‡´é—®é¢˜ï¼Œlist æä¾›äº†æˆå‘˜å‡½æ•°ä½œä¸ºæ›¿ä»£ï¼ŒåŒ…æ‹¬ä¸‹é¢å‡ ä¸ªï¼š

- merge

- remove

- remove_if

- reverse

- sort

- unique

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼ˆä»¥ xeus-cling çš„äº¤äº’ä¸ºä¾‹ï¼‰ï¼š

```cpp
#include <algorithm>
#include <list>
#include <vector>
using namespace std;
```

```cpp
list<int> lst{1, 7, 2, 8, 3};
vector<int> vec{1, 7, 2, 8, 3};
```

```javascript
sort(vec.begin(), vec.end());     //  æ­£å¸¸
// sort(lst.begin(), lst.end());  //  ä¼šå‡ºé”™
lst.sort();                       //  æ­£å¸¸
```

```javascript
lst  //  è¾“å‡º  { 1, 2, 3, 7, 8 }
```

```javascript
vec  //  è¾“å‡º  { 1, 2, 3, 7, 8 }
```

å¦‚æœä¸ç”¨ xeus-cling çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦åšç‚¹è½¬æ¢ï¼š

- æŠŠ **using namespace std;** åé¢çš„éƒ¨åˆ†æ”¾åˆ° **main** å‡½æ•°é‡Œã€‚

- æ–‡ä»¶å¼€å¤´åŠ ä¸Š **#include "output_container.h"** å’Œ **#include <iostream>**ã€‚

- æŠŠè¾“å‡ºè¯­å¥æ”¹å†™æˆ **cout << â€¦ << endl;**ã€‚

è¿™æ¬¡æˆ‘ä¼šç»™ä¸€ä¸‹æ”¹é€ çš„ç¤ºä¾‹ï¼ˆä¸‹æ¬¡å°±è¯·ä½ è‡ªè¡Œæ”¹å†™äº†ğŸ˜‰ï¼‰ï¼š

```cpp
#include "output_container.h"
#include <iostream>
#include <algorithm>
#include <list>
#include <vector>
using namespace std;

int main()
{
  list<int> lst{1, 7, 2, 8, 3};
  vector<int> vec{1, 7, 2, 8, 3};

  sort(vec.begin(), vec.end());    //  æ­£å¸¸
  // sort(lst.begin(), lst.end()); //  ä¼šå‡ºé”™
  lst.sort();                      //  æ­£å¸¸

  cout << lst << endl;
  //  è¾“å‡º  { 1, 2, 3, 7, 8 }

  cout << vec << endl;
  //  è¾“å‡º  { 1, 2, 3, 7, 8 }
}
```

## forward_list 

æ—¢ç„¶ **list** æ˜¯åŒå‘é“¾è¡¨ï¼Œé‚£ä¹ˆ C++ é‡Œæœ‰æ²¡æœ‰å•å‘é“¾è¡¨å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚ä» C++11 å¼€å§‹ï¼Œå‰å‘åˆ—è¡¨ **forward_list** æˆäº†æ ‡å‡†çš„ä¸€éƒ¨åˆ†ã€‚

æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å®ƒçš„å†…å­˜å¸ƒå±€ï¼š

![](./images/04-06.png)

å¤§éƒ¨åˆ† C++ å®¹å™¨éƒ½æ”¯æŒ **insert** æˆå‘˜å‡½æ•°ï¼Œè¯­ä¹‰æ˜¯ä»æŒ‡å®šçš„ä½ç½®ä¹‹å‰æ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚å¯¹äº **forward_list**ï¼Œè¿™ä¸æ˜¯ä¸€ä»¶å®¹æ˜“åšåˆ°çš„äº‹æƒ…ï¼ˆæƒ³ä¸€æƒ³ï¼Œä¸ºä»€ä¹ˆï¼Ÿï¼‰ã€‚æ ‡å‡†åº“æä¾›äº†ä¸€ä¸ª **insert_after** ä½œä¸ºæ›¿ä»£ã€‚æ­¤å¤–ï¼Œå®ƒè·Ÿ **list** ç›¸æ¯”è¿˜ç¼ºäº†ä¸‹é¢è¿™äº›æˆå‘˜å‡½æ•°ï¼š

- back

- size

- push_back

- emplace_back

- pop_back

ä¸ºä»€ä¹ˆä¼šéœ€è¦è¿™ä¹ˆä¸€ä¸ªé˜‰å‰²ç‰ˆçš„ list å‘¢ï¼ŸåŸå› æ˜¯ï¼Œåœ¨å…ƒç´ å¤§å°è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œ**forward_list** èƒ½èŠ‚çº¦çš„å†…å­˜æ˜¯éå¸¸å¯è§‚çš„ï¼›åœ¨åˆ—è¡¨ä¸é•¿çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½åå‘æŸ¥æ‰¾ä¹Ÿä¸æ˜¯ä¸ªå¤§é—®é¢˜ã€‚æé«˜å†…å­˜åˆ©ç”¨ç‡ï¼Œå¾€å¾€å°±èƒ½æé«˜ç¨‹åºæ€§èƒ½ï¼Œæ›´ä¸ç”¨è¯´åœ¨å†…å­˜å¯èƒ½ä¸è¶³æ—¶çš„æƒ…å†µäº†ã€‚

ç›®å‰ä½ åªéœ€è¦çŸ¥é“è¿™ä¸ªä¸œè¥¿çš„å­˜åœ¨å°±å¯ä»¥äº†ã€‚å¦‚æœä½ è§‰å¾—ä¸éœ€è¦ç”¨åˆ°å®ƒçš„è¯ï¼Œä¹Ÿè®¸ä½ çœŸçš„ä¸éœ€è¦å®ƒã€‚

## queue 

åœ¨ç»“æŸæœ¬è®²ä¹‹å‰ï¼Œæˆ‘ä»¬å†å¿«é€Ÿè®²ä¸¤ä¸ªç±»å®¹å™¨ã€‚å®ƒä»¬çš„ç‰¹åˆ«ç‚¹åœ¨äºå®ƒä»¬éƒ½ä¸æ˜¯å®Œæ•´çš„å®ç°ï¼Œè€Œæ˜¯ä¾èµ–äºæŸä¸ªç°æœ‰çš„å®¹å™¨ï¼Œå› è€Œè¢«ç§°ä¸ºå®¹å™¨é€‚é…å™¨ï¼ˆcontainer adaptorï¼‰ã€‚

æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹é˜Ÿåˆ— **queue**ï¼Œå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„æ•°æ®ç»“æ„ã€‚

**queue** ç¼ºçœç”¨ **deque** æ¥å®ç°ã€‚å®ƒçš„æ¥å£è·Ÿ **deque** æ¯”ï¼Œæœ‰å¦‚ä¸‹æ”¹å˜ï¼š

- ä¸èƒ½æŒ‰ä¸‹æ ‡è®¿é—®å…ƒç´ 

- æ²¡æœ‰ **begin**ã€**end** æˆå‘˜å‡½æ•°

- ç”¨ **emplace** æ›¿ä»£äº† **emplace_back**ï¼Œç”¨ **push** æ›¿ä»£äº† **push_back**ï¼Œç”¨ **pop** æ›¿ä»£äº† **pop_front**ï¼›æ²¡æœ‰å…¶ä»–çš„ **push_â€¦**ã€**pop_â€¦**ã€**emplaceâ€¦**ã€**insert**ã€**erase** å‡½æ•°

å®ƒçš„å®é™…å†…å­˜å¸ƒå±€å½“ç„¶æ˜¯éšåº•å±‚çš„å®¹å™¨è€Œå®šçš„ã€‚ä»æ¦‚å¿µä¸Šè®²ï¼Œå®ƒçš„ç»“æ„å¯å¦‚ä¸‹æ‰€ç¤ºï¼š

![](./images/04-07.png)

é‰´äº **queue** ä¸æä¾› **begin** å’Œ **end** æ–¹æ³•ï¼Œæ— æ³•æ— æŸéå†ï¼Œæˆ‘ä»¬åªèƒ½ç”¨ä¸‹é¢çš„ä»£ç çº¦ç•¥å±•ç¤ºä¸€ä¸‹å…¶æ¥å£ï¼š

```cpp
#include <iostream>
#include <queue>

int main()
{
  std::queue<int> q;
  q.push(1);
  q.push(2);
  q.push(3);
  while (!q.empty()) {
    std::cout << q.front()
              << std::endl;
    q.pop();
  }
}
```

è¿™ä¸ªä»£ç çš„è¾“å‡ºå°±ä¸ç”¨è§£é‡Šäº†å§ã€‚å“ˆå“ˆã€‚

## stack 

ç±»ä¼¼åœ°ï¼Œæ ˆ **stack** æ˜¯åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ•°æ®ç»“æ„ã€‚

**queue** ç¼ºçœä¹Ÿæ˜¯ç”¨ **deque** æ¥å®ç°ï¼Œä½†å®ƒçš„æ¦‚å¿µå’Œ **vector** æ›´ç›¸ä¼¼ã€‚å®ƒçš„æ¥å£è·Ÿ **vector** æ¯”ï¼Œæœ‰å¦‚ä¸‹æ”¹å˜ï¼š

- ä¸èƒ½æŒ‰ä¸‹æ ‡è®¿é—®å…ƒç´ 

- æ²¡æœ‰ **begin**ã€**end** æˆå‘˜å‡½æ•°

- **back** æˆäº† **top**ï¼Œæ²¡æœ‰ **front**

- ç”¨ **emplace** æ›¿ä»£äº† **emplace_back**ï¼Œç”¨ **push** æ›¿ä»£äº† **push_back**ï¼Œç”¨ **pop** æ›¿ä»£äº† **pop_back**ï¼›æ²¡æœ‰å…¶ä»–çš„ **push_â€¦**ã€**pop_â€¦**ã€**emplaceâ€¦**ã€**insert**ã€**erase** å‡½æ•°

ä¸€èˆ¬å›¾å½¢è¡¨ç¤ºæ³•ä¼šæŠŠ **stack** è¡¨ç¤ºæˆä¸€ä¸ªç«–èµ·çš„ **vector**ï¼š

![](./images/04-08.png)

è¿™é‡Œæœ‰ä¸€ä¸ªå°ç»†èŠ‚éœ€è¦æ³¨æ„ã€‚**stack** è·Ÿæˆ‘ä»¬å‰é¢è®¨è®ºå†…å­˜ç®¡ç†æ—¶çš„æ ˆæœ‰ä¸€ä¸ªåŒºåˆ«ï¼šåœ¨è¿™é‡Œä¸‹é¢æ˜¯ä½åœ°å€ï¼Œå‘ä¸Šåˆ™åœ°å€å¢å¤§ï¼›è€Œæˆ‘ä»¬è®¨è®ºå†…å­˜ç®¡ç†æ—¶ï¼Œé«˜åœ°å€åœ¨ä¸‹é¢ï¼Œå‘ä¸Šåˆ™åœ°å€å‡å°ï¼Œæ–¹å‘æ­£å¥½ç›¸åã€‚æè¿™ä¸€ç‚¹ï¼Œæ˜¯å¸Œæœ›ä½ åœ¨æœ‰éœ€è¦æ£€æŸ¥æ ˆç»“æ„æ—¶ä¸ä¼šå› æ­¤è€Œå‘ç”Ÿæ··æ·†ï¼›åœ¨ä½¿ç”¨ **stack** æ—¶ï¼Œè¿™ä¸ªåŒºåˆ«é€šå¸¸æ— å…³ç´§è¦ã€‚

ç¤ºä¾‹ä»£ç å’Œä¸Šé¢çš„ **stack** ç›¸ä¼¼ï¼Œä½†è¾“å‡ºæ­£å¥½ç›¸åï¼š

```cpp
#include <iostream>
#include <stack>

int main()
{
  std::stack<int> s;
  s.push(1);
  s.push(2);
  s.push(3);
  while (!s.empty()) {
    std::cout << s.top()
              << std::endl;
    s.pop();
  }
}
```

## å†…å®¹å°ç»“ 

æœ¬è®²æˆ‘ä»¬ä»‹ç»äº† C++ é‡Œé¢çš„åºåˆ—å®¹å™¨å’Œä¸¤ä¸ªå®¹å™¨é€‚é…å™¨ã€‚é€šè¿‡æœ¬è®²çš„ä»‹ç»ï¼Œä½ åº”è¯¥å·²ç»å¯¹å®¹å™¨æœ‰äº†ä¸€å®šçš„ç†è§£å’Œè®¤è¯†ã€‚ä¸‹ä¸€è®²æˆ‘ä»¬ä¼šè®²å®Œå‰©ä½™çš„æ ‡å‡†å®¹å™¨ã€‚

## è¯¾åæ€è€ƒ 

ç•™å‡ ä¸ªé—®é¢˜è¯·ä½ æ€è€ƒä¸€ä¸‹ï¼š

1. ä»Šå¤©è®²çš„å®¹å™¨æœ‰å“ªäº›å…±åŒçš„ç‰¹ç‚¹ï¼Ÿ

2. ä¸ºä»€ä¹ˆ C++ æœ‰è¿™ä¹ˆå¤šä¸åŒçš„åºåˆ—å®¹å™¨ç±»å‹ï¼Ÿ

3. ä¸ºä»€ä¹ˆ **stack**ï¼ˆæˆ– **queue**ï¼‰çš„ **pop** å‡½æ•°è¿”å›ç±»å‹ä¸º **void**ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›å®¹å™¨çš„ **top**ï¼ˆæˆ– **front**ï¼‰æˆå‘˜ï¼Ÿ

æ¬¢è¿ç•™è¨€å’Œæˆ‘äº¤æµä½ çš„çœ‹æ³•ã€‚

## <span data-slate-string="true">å‚è€ƒèµ„æ–™</span> 

**[1] cppreference.com, â€œContainers libraryâ€.**[https://en.cppreference.com/w/cpp/container](https://en.cppreference.com/w/cpp/container)

**[1a] cppreference.com, â€œå®¹å™¨åº“â€.**[https://zh.cppreference.com/w/cpp/container](https://zh.cppreference.com/w/cpp/container)

**[2] QuantStack, xeus-cling.**[https://github.com/QuantStack/xeus-cling](https://github.com/QuantStack/xeus-cling)

**[3] å´å’ç‚œ, output_container.**[https://github.com/adah1972/output_container/blob/master/output_container.h](https://github.com/adah1972/output_container/blob/master/output_container.h)

