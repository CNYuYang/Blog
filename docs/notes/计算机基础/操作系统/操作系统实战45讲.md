# 操作系统实战45讲

## 课程主页

[https://time.geekbang.org/column/intro/100078401](https://time.geekbang.org/column/intro/100078401)

## 课程介绍

作为计算机王国中的实际“掌舵人”，操作系统是一切法则的制定者。它掌管着硬件软件等一切资源，并负责处理多种基本事务（内存管理、资源配置、I/O 设备、网络通信等），既能维护公平正义又能杀伐决断，**而我们的课程就是讲解如何实现它**。

**课程设计**

课程中，彭东老师将多年的操作系统开发经验倾囊相授，并带你从系统级的高度分析和解决相关问题，理论结合实践，带你从无到有实现一个自己的操作系统。

**实现路径**

- 从最小内核 Hello OS 练手，初步了解操作系统如何运行；
- 对比经典操作系统，推陈出新，设计自己的操作系统——Cosmos 内核结构；
- 解决操作系统的硬件、同步以及初始化问题，建立 Cosmos 操作系统的测试环境以及虚拟硬件；
- 利用操作系统实现对计算机的管控，把 Cosmos 操作系统做大做强；
- 拓展视野，储备知识，分享技术前沿内容。

**终极目标**

- 搞懂操作系统长什么样，如何运作，深入理解和掌握相关知识（理论）；
- 实现一个自己的，基于 x86 平台的支持多进程的操作系统内核（实操）。

## 目录

### 开篇词

[开篇词丨为什么要学写一个操作系统？](/notes/计算机基础/操作系统/操作系统实战45讲/开篇词/为什么要学写一个操作系统？)

### 尝尝鲜：从一个Hello到另一个Hello

[01丨程序的运行过程：从代码到机器运行](/notes/计算机基础/操作系统/操作系统实战45讲/尝尝鲜：从一个Hello到另一个Hello/程序的运行过程：从代码到机器运行)

[02丨几行汇编几行C：实现一个最简单的内核](/notes/计算机基础/操作系统/操作系统实战45讲/尝尝鲜：从一个Hello到另一个Hello/几行汇编几行C：实现一个最简单的内核)

### 心有蓝图：设计

[03丨黑盒之中有什么：内核结构与设计](/notes/计算机基础/操作系统/操作系统实战45讲/心有蓝图：设计/黑盒之中有什么：内核结构与设计)

[04丨震撼的Linux全景图：业界成熟的内核架构长什么样？](/notes/计算机基础/操作系统/操作系统实战45讲/心有蓝图：设计/震撼的Linux全景图：业界成熟的内核架构长什么样？)

### 程序的基石：硬件

[05丨CPU工作模式：执行程序的三种模式](/notes/计算机基础/操作系统/操作系统实战45讲/程序的基石：硬件/CPU工作模式：执行程序的三种模式)

[06丨虚幻与真实：程序中的地址如何转换？](/notes/计算机基础/操作系统/操作系统实战45讲/程序的基石：硬件/虚幻与真实：程序中的地址如何转换？)

[07丨Cache与内存：程序放在哪儿？](/notes/计算机基础/操作系统/操作系统实战45讲/程序的基石：硬件/Cache与内存：程序放在哪儿？)

### 基本法：同步原语

[08丨锁：并发操作中，解决数据同步的四种方法](/notes/计算机基础/操作系统/操作系统实战45讲/基本法：同步原语/锁：并发操作中，解决数据同步的四种方法)

[09丨瞧一瞧Linux：Linux的自旋锁和信号量如何实现？](/notes/计算机基础/操作系统/操作系统实战45讲/基本法：同步原语/瞧一瞧Linux：Linux的自旋锁和信号量如何实现？)

### 夺权：启动初始化

[10丨设置工作模式与环境（上）：建立计算机](/notes/计算机基础/操作系统/操作系统实战45讲/夺权：启动初始化/设置工作模式与环境（上）：建立计算机)

[11丨设置工作模式与环境（中）：建造二级引导器](/notes/计算机基础/操作系统/操作系统实战45讲/夺权：启动初始化/设置工作模式与环境（中）：建造二级引导器)

[12丨设置工作模式与环境（下）：探查和收集信息](/notes/计算机基础/操作系统/操作系统实战45讲/夺权：启动初始化/设置工作模式与环境（下）：探查和收集信息)

[13丨第一个C函数：如何实现板级初始化？](/notes/计算机基础/操作系统/操作系统实战45讲/夺权：启动初始化/第一个C函数：如何实现板级初始化？)

[14丨Linux初始化（上）：GRUB与vmlinuz的结构](/notes/计算机基础/操作系统/操作系统实战45讲/夺权：启动初始化/Linux初始化（上）：GRUB与vmlinuz的结构)

[15丨Linux初始化（下）：从_start到第一个进程](/notes/计算机基础/操作系统/操作系统实战45讲/夺权：启动初始化/Linux初始化（下）：从_start到第一个进程)

### 土地革命：内存

[16丨划分土地（上）：如何划分与组织内存？](/notes/计算机基础/操作系统/操作系统实战45讲/土地革命：内存/划分土地（上）：如何划分与组织内存？)

[17丨划分土地（中）：如何实现内存页面初始化？](/notes/计算机基础/操作系统/操作系统实战45讲/土地革命：内存/划分土地（中）：如何实现内存页面初始化？)

[18丨划分土地（下）：如何实现内存页的分配与释放？](/notes/计算机基础/操作系统/操作系统实战45讲/土地革命：内存/划分土地（下）：如何实现内存页的分配与释放？)

[19丨土地不能浪费：如何管理内存对象？](/notes/计算机基础/操作系统/操作系统实战45讲/土地革命：内存/土地不能浪费：如何管理内存对象？)

[20丨土地需求扩大与保障：如何表示虚拟内存？](/notes/计算机基础/操作系统/操作系统实战45讲/土地革命：内存/土地需求扩大与保障：如何表示虚拟内存？)

[21丨土地需求扩大与保障：如何分配和释放虚拟内存？](/notes/计算机基础/操作系统/操作系统实战45讲/土地革命：内存/土地需求扩大与保障：如何分配和释放虚拟内存？)

[22丨瞧一瞧Linux：伙伴系统如何分配内存？](/notes/计算机基础/操作系统/操作系统实战45讲/土地革命：内存/瞧一瞧Linux：伙伴系统如何分配内存？)

[23丨瞧一瞧Linux：SLAB如何分配内存？](/notes/计算机基础/操作系统/操作系统实战45讲/土地革命：内存/瞧一瞧Linux：SLAB如何分配内存？)

### 活动实体：进程

[24丨活动的描述：到底什么是进程？](/notes/计算机基础/操作系统/操作系统实战45讲/活动实体：进程/活动的描述：到底什么是进程？)

[25丨多个活动要安排（上）：多进程如何调度？](/notes/计算机基础/操作系统/操作系统实战45讲/活动实体：进程/多个活动要安排（上）：多进程如何调度？)

[26丨多个活动要安排（下）：如何实现进程的等待与唤醒机制？](/notes/计算机基础/操作系统/操作系统实战45讲/活动实体：进程/多个活动要安排（下）：如何实现进程的等待与唤醒机制？)

[27丨瞧一瞧Linux：Linux如何实现进程与进程调度_](/notes/计算机基础/操作系统/操作系统实战45讲/活动实体：进程/瞧一瞧Linux：Linux如何实现进程与进程调度_)

### 下属部门：设备I-O

[28丨部门分类：如何表示设备类型与设备驱动？](/notes/计算机基础/操作系统/操作系统实战45讲/下属部门：设备I-O/部门分类：如何表示设备类型与设备驱动？)

[29丨部门建立：如何在内核中注册设备？](/notes/计算机基础/操作系统/操作系统实战45讲/下属部门：设备I-O/部门建立：如何在内核中注册设备？)

[30丨部门响应：设备如何处理内核I-O包？](/notes/计算机基础/操作系统/操作系统实战45讲/下属部门：设备I-O/部门响应：设备如何处理内核I_O包？)

[31丨瞧一瞧Linux：如何获取所有设备信息？](/notes/计算机基础/操作系统/操作系统实战45讲/下属部门：设备I-O/瞧一瞧Linux：如何获取所有设备信息？)

### 银行仓库：文件系统

[32丨仓库结构：如何组织文件](/notes/计算机基础/操作系统/操作系统实战45讲/银行仓库：文件系统/仓库结构：如何组织文件_)

[33丨仓库划分：文件系统的格式化操作](/notes/计算机基础/操作系统/操作系统实战45讲/银行仓库：文件系统/仓库划分：文件系统的格式化操作)

[34丨仓库管理：如何实现文件的六大基本操作？](/notes/计算机基础/操作系统/操作系统实战45讲/银行仓库：文件系统/仓库管理：如何实现文件的六大基本操作？)

[35丨瞧一瞧Linux：虚拟文件系统如何管理文件？](/notes/计算机基础/操作系统/操作系统实战45讲/银行仓库：文件系统/瞧一瞧Linux：虚拟文件系统如何管理文件？)

### 通信部：网络

[36丨从URL到网卡：如何全局观察网络数据流动？](/notes/计算机基础/操作系统/操作系统实战45讲/通信部：网络/从URL到网卡：如何全局观察网络数据流动？)

[37丨从内核到应用：网络数据在内核中如何流转](/notes/计算机基础/操作系统/操作系统实战45讲/通信部：网络/从内核到应用：网络数据在内核中如何流转)

[38丨从单排到团战：详解操作系统的宏观网络架构](/notes/计算机基础/操作系统/操作系统实战45讲/通信部：网络/从单排到团战：详解操作系统的宏观网络架构)

[39丨瞧一瞧Linux：详解socket实现与网络编程接口](/notes/计算机基础/操作系统/操作系统实战45讲/通信部：网络/瞧一瞧Linux：详解socket实现与网络编程接口)

[40丨瞧一瞧Linux：详解socket的接口实现](/notes/计算机基础/操作系统/操作系统实战45讲/通信部：网络/瞧一瞧Linux：详解socket的接口实现)

### 服务交接：接口

[41丨服务接口：如何搭建沟通桥梁？](/notes/计算机基础/操作系统/操作系统实战45讲/服务交接：接口/服务接口：如何搭建沟通桥梁？)

[42丨瞧一瞧Linux：如何实现系统API？](/notes/计算机基础/操作系统/操作系统实战45讲/服务交接：接口/瞧一瞧Linux：如何实现系统API？)

### 番外篇：虚化的世界

[43丨虚拟机内核：KVM是什么？](/notes/计算机基础/操作系统/操作系统实战45讲/番外篇：虚化的世界/虚拟机内核：KVM是什么？)

[44丨容器：如何理解容器的实现机制？](/notes/计算机基础/操作系统/操作系统实战45讲/番外篇：虚化的世界/容器：如何理解容器的实现机制？)

[45丨ARM新宠：苹果的M1芯片因何而快？](/notes/计算机基础/操作系统/操作系统实战45讲/番外篇：虚化的世界/ARM新宠：苹果的M1芯片因何而快？)

[46丨AArch64体系：ARM最新编程架构模型剖析](/notes/计算机基础/操作系统/操作系统实战45讲/番外篇：虚化的世界/AArch64体系：ARM最新编程架构模型剖析)

### 特别放送

[用户故事丨成为面向“知识库”的工程师](/notes/计算机基础/操作系统/操作系统实战45讲/特别放送/成为面向“知识库”的工程师)

### 结束语

[结束语丨生活可以一地鸡毛，但操作系统却是心中的光](/notes/计算机基础/操作系统/操作系统实战45讲/结束语/生活可以一地鸡毛，但操作系统却是心中的光)
